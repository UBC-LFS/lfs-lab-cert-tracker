{% extends "header.html" %}

{% block content %}


<div class="row">
	<div class="col-md-10 offset-md-1">

		{% if messages %}
			{% for message in messages %}
				<div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
			{% endfor %}
		{% endif %}

		<h3 class="title">
			{% if loggedin_user.id == user_id %}
				My
			{% else %}
				{{ user.get_full_name }}'s
			{% endif %}
			Training Record
		</h3>

		<div class="box border-green mt-3">
			<h5 class="text-success">
				<i class="material-icons">verified_user</i> Training Record
			</h5>
			<div class="text-secondary">
				{% if user_cert_list %}
					<ul>
						{% for user_cert in user_cert_list %}
							<li>
								<a href="/users/{{user_id}}/training-record/{{user_cert.id}}/">{{ user_cert.name }}</a>
							</li>
						{% endfor %}
					</ul>
				{% else %}
					You do not have any training records
				{% endif %}
			</div>
		</div>

		{% if missing_cert_list %}

			<div class="box border-red mt-5">
				<h5 class="text-danger">
					<i class="material-icons">notification_important</i> Missing Training Record
				</h5>
				<div class="text-secondary">
					<ul>
						{% for missing_cert in missing_cert_list %}
							<li>{{ missing_cert.name }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		{% endif %}

		{% if expired_cert_list %}

			<div class="box border-gray mt-5">
				<h5 class="text-secondary">
					<i class="material-icons">warning</i> Expired Training Record
				</h5>
				<div class="text-secondary">
					<ul>
						{% for expired_cert in expired_cert_list %}
							<li>{{ expired_cert.name }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		{% endif %}

		<h5 class="title">Add Training Record</h5>

		<div class="text-info mb-2">
			<small>
				- Valid file types: jpg, jpeg, png, pdf, doc, docx <br />
				- The maximum file size that can be uploaded is 1.5 MB. <br />
				- A filename has at most 256 characters.
			</small>
		</div>

		<form id="add_user_cert_form" action="/api/users/{{user_id}}/certificates/" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<table>{{ user_cert_form.as_table }}</table>
			<input class="btn btn-primary" id="submit_add_user_cert_form" type="submit" value="Add Training Record"/>
		</form>
	</div>
</div>
{% endblock %}
