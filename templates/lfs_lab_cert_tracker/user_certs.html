{% extends "header.html" %}

{% block content %}


<div class="row">
	<div class="col-md-10 offset-md-1">

		{% if messages %}
			{% for message in messages %}
				<div class="alert {{ message.tags }} alert-dismissible fade show" role="alert">
					{{ message }}
					<button type="button" class="close" data-dismiss="alert" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
			{% endfor %}
		{% endif %}

		<h3 class="title">My Training Record</h3>

		<div class="card border-success">
			<div class="card-header bg-success text-white">Training Record</div>
			<div class="card-body">
				{% if user_cert_list %}
				<div class="card-text">
					<ul>
						{% for user_cert in user_cert_list %}
							<li>
								<a href="/users/{{user_id}}/training-record/{{user_cert.id}}/">{{ user_cert.name }}</a>
							</li>
						{% endfor %}
					</ul>
				</div>
				{% else %}
					<h5 class="card-title">You do not have any training records</h5>
				{% endif %}
			</div>
		</div>

		{% if missing_cert_list %}
		<div class="card card border-danger">
			<div class="card-header bg-danger text-white">Missing Training Record</div>
			<div class="card-body">
				<div class="card-text">
					<ul>
						{% for missing_cert in missing_cert_list %}
							<li>{{ missing_cert.name }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
		{% endif %}

		{% if expired_cert_list %}
		<div class="card card border-secondary">
			<div class="card-header bg-secondary text-white">Expired Training Record</div>
			<div class="card-body">
				<div class="card-text">
					<ul>
						{% for expired_cert in expired_cert_list %}
							<li>{{ expired_cert.name }}</li>
						{% endfor %}
					</ul>
				</div>
			</div>
		</div>
		{% endif %}

		<h5 class="title">Add Training Record</h5>
		<small>Valid file types: jpg, jpeg, png, pdf, doc, docx</small><br />
		<small>The maximum file size that can be uploaded is 1.5 MB</small>
		<form id="add_user_cert_form" action="/api/users/{{user_id}}/certificates/" method="post" enctype="multipart/form-data">
			{% csrf_token %}
			<table>{{ user_cert_form.as_table }}</table>
			<input class="btn btn-primary" id="submit_add_user_cert_form" type="submit" value="Add Training Record"/>
		</form>
	</div>
</div>
{% endblock %}
